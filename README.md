# 家庭任务管理系统 - 真实时同步使用指南

## ⚡ 真实时同步特性

### 🚀 Server-Sent Events (SSE) 技术

本系统采用现代的Server-Sent Events技术，实现：
- **零延迟同步**：任何设备上的修改立即推送到所有其他设备
- **自动重连**：网络中断后自动重新建立连接
- **降级机制**：不支持SSE的环境自动降级为轮询模式

## 🌐 多设备访问设置

### 启动实时同步服务器

1. **启动服务器**
   - 双击 `start_server.bat` 或在命令行运行 `python server.py`
   - 服务器启动后会显示访问地址和实时同步端点

2. **访问方式**
   - **本设备访问**：http://localhost:8080
   - **其他设备访问**：http://[你的电脑IP]:8080
   - 例如：http://192.168.1.69:8080

3. **实时同步机制**
   - 使用Server-Sent Events建立持久连接
   - 任何设备修改数据后，立即推送到所有连接的设备
   - 网络异常时自动重连（3秒间隔）
   - 不支持SSE时自动降级为5秒轮询

## 📱 真实时体验测试

### 测试步骤
1. 在主设备上启动服务器并打开网页
2. 在手机/平板等其他设备上访问服务器地址
3. 在任一设备上添加任务或修改任务状态
4. 观察其他设备上的变化（应该是瞬间同步）

### 同步范围
- ✅ 添加/删除/编辑任务
- ✅ 修改任务状态（完成/放弃/重新激活）
- ✅ 添加/删除/编辑成员
- ✅ 日历任务管理
- ✅ 任务统计更新

## 🔧 技术实现

- **前端**：HTML5 + CSS3 + JavaScript + EventSource API
- **后端**：Python HTTP服务器 + Server-Sent Events
- **数据存储**：JSON文件 + 内存缓存
- **实时通信**：SSE单向推送 + HTTP双向交互
- **容错机制**：自动重连 + 轮询降级

## 📋 功能优势

✅ **真实时同步**：毫秒级数据推送  
✅ **自动重连**：网络恢复后立即同步  
✅ **智能降级**：兼容各种网络环境  
✅ **资源高效**：长连接减少网络开销  
✅ **简洁界面**：保持用户偏好的清爽设计  

## 🚀 快速开始

1. 确保所有设备连接到同一个WiFi网络
2. 在主设备上运行 `start_server.bat`
3. 记录显示的IP地址（如192.168.1.69:8080）
4. 在其他设备的浏览器中输入该地址
5. 开始体验真正的实时多设备任务管理！

## ⚠️ 注意事项

- 确保防火墙允许8080端口
- 主设备需要保持服务器运行状态
- 建议在稳定的WiFi环境下使用
- 数据会自动备份到shared_data.json文件
- SSE连接会在页面关闭时自动清理

## 🎯 技术细节

### Server-Sent Events优势
- 服务器主动推送，无需客户端轮询
- 自动处理连接断开和重连
- 比WebSocket更简单，更适合单向数据推送
- 浏览器原生支持，无需额外库

### 实时同步流程
1. 客户端建立SSE连接到 `/api/events`
2. 任意设备修改数据并发送到 `/api/data`
3. 服务器保存数据并立即广播到所有SSE连接
4. 其他设备收到推送后立即更新界面
5. 整个过程通常在100毫秒内完成